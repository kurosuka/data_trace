(function(t){function e(e){for(var n,r,i=e[0],s=e[1],u=e[2],p=0,d=[];p<i.length;p++)r=i[p],Object.prototype.hasOwnProperty.call(o,r)&&o[r]&&d.push(o[r][0]),o[r]=0;for(n in s)Object.prototype.hasOwnProperty.call(s,n)&&(t[n]=s[n]);c&&c(e);while(d.length)d.shift()();return l.push.apply(l,u||[]),a()}function a(){for(var t,e=0;e<l.length;e++){for(var a=l[e],n=!0,i=1;i<a.length;i++){var s=a[i];0!==o[s]&&(n=!1)}n&&(l.splice(e--,1),t=r(r.s=a[0]))}return t}var n={},o={standardValueConfig:0},l=[];function r(e){if(n[e])return n[e].exports;var a=n[e]={i:e,l:!1,exports:{}};return t[e].call(a.exports,a,a.exports,r),a.l=!0,a.exports}r.m=t,r.c=n,r.d=function(t,e,a){r.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:a})},r.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},r.t=function(t,e){if(1&e&&(t=r(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var a=Object.create(null);if(r.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var n in t)r.d(a,n,function(e){return t[e]}.bind(null,n));return a},r.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return r.d(e,"a",e),e},r.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},r.p="";var i=window["webpackJsonp"]=window["webpackJsonp"]||[],s=i.push.bind(i);i.push=e,i=i.slice();for(var u=0;u<i.length;u++)e(i[u]);var c=s;l.push([2,"chunk-vendors"]),a()})({"1f2f":function(t,e,a){},2:function(t,e,a){t.exports=a("f038")},"753f":function(t,e,a){"use strict";a("1f2f")},"7ebf":function(t,e,a){},9944:function(t,e,a){"use strict";a.d(e,"b",(function(){return n})),a.d(e,"a",(function(){return o}));a("1276"),a("ac1f"),a("159b");function n(t){var e=t.split("?"),a={};return e.length>1&&(e=e[1].split("#")[0].split("&"),e.forEach((function(t){t=t.split("="),a[t[0]]=t[1]}))),a}function o(t){if(window.localStorage)return window.localStorage.getItem(t)}},f038:function(t,e,a){"use strict";a.r(e);a("e260"),a("e6cf"),a("cca6"),a("a79d");var n=a("a026"),o=a("5c96"),l=a.n(o),r=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"daily-quality"},[a("el-container",[a("el-main",[a("div",{staticClass:"nav"},[a("el-form",{attrs:{model:t.form,inline:!0}},[a("el-form-item",{attrs:{label:"点位"}},[a("el-select",{attrs:{placeholder:"请选择"},model:{value:t.form.pointOption,callback:function(e){t.$set(t.form,"pointOption",e)},expression:"form.pointOption"}},t._l(t.pointData,(function(t){return a("el-option",{key:t.pointId,attrs:{label:t.pointName,value:t.pointId}})})),1)],1),a("el-form-item",{attrs:{label:"监测项目"}},[a("el-tooltip",{attrs:{content:t.selectTooltip,placement:"top"}},[a("el-select",{attrs:{placeholder:"请选择",multiple:!0,"collapse-tags":!0},model:{value:t.form.selectValue,callback:function(e){t.$set(t.form,"selectValue",e)},expression:"form.selectValue"}},t._l(t.factorList,(function(t){return a("el-option",{key:t.factorCode,attrs:{label:t.factorName,value:t.factorCode}})})),1)],1)],1),a("el-form-item",{attrs:{label:""}},[a("el-button",{attrs:{type:"primary"},on:{click:t.getAuditTableData}},[t._v("查询")])],1),a("el-form-item",{attrs:{label:""}},[a("el-button",{attrs:{type:"warning"},on:{click:t.dialogToggle}},[t._v("设置内容")])],1)],1)],1),a("el-tabs",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],attrs:{type:"card"},on:{"tab-click":t.tabClick},model:{value:t.tabsActive,callback:function(e){t.tabsActive=e},expression:"tabsActive"}},[a("el-tab-pane",{attrs:{label:"已审核"}},[a("el-table",{attrs:{data:t.tableData,size:"middle"}},[a("el-table-column",{attrs:{label:"序号",type:"index"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",[t._v(t._s(t._index(e.$index)))])]}}])}),a("el-table-column",{attrs:{label:"点位名称",prop:"pointName"}}),a("el-table-column",{attrs:{label:"监测项目",prop:"factorName"}}),a("el-table-column",{attrs:{label:"跨度值",prop:"spanValues"}}),a("el-table-column",{attrs:{label:"零点标准浓液浓度",prop:"zeroStandard"}}),a("el-table-column",{attrs:{label:"跨度标准浓液浓度",prop:"spanStandard"}}),a("el-table-column",{attrs:{label:"提交人",prop:"submitterName"}}),a("el-table-column",{attrs:{label:"提交时间",prop:"submissionTime","show-overflow-tooltip":!0}}),a("el-table-column",{attrs:{label:"审核人",prop:"reviewerName"}}),a("el-table-column",{attrs:{label:"审核时间",prop:"reviewTime","show-overflow-tooltip":!0}}),a("el-table-column",{attrs:{label:"操作"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-link",{on:{click:function(a){return t.historyClick(e)}}},[t._v("历史记录")])]}}])})],1)],1),a("el-tab-pane",{attrs:{label:"未审核"}},[a("el-table",{attrs:{data:t.auditNottableData,size:"middle"}},[a("el-table-column",{attrs:{label:"序号",type:"index"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",[t._v(t._s(t._index(e.$index)))])]}}])}),a("el-table-column",{attrs:{label:"点位名称",prop:"pointName"}}),a("el-table-column",{attrs:{label:"监测项目",prop:"factorName"}}),a("el-table-column",{attrs:{label:"跨度值",prop:"spanValues"}}),a("el-table-column",{attrs:{label:"零点标准浓液浓度",prop:"zeroStandard"}}),a("el-table-column",{attrs:{label:"跨度标准浓液浓度",prop:"spanStandard"}}),a("el-table-column",{attrs:{label:"提交人",prop:"submitterName"}}),a("el-table-column",{attrs:{label:"提交时间",prop:"submissionTime","show-overflow-tooltip":!0}})],1)],1)],1)],1)],1),t.dialogVisble?a("el-dialog",{directives:[{name:"draggable",rawName:"v-draggable"}],attrs:{title:"项目设置详情",visible:t.dialogVisble,"close-on-click-modal":!1,"destroy-on-close":!0},on:{"update:visible":function(e){t.dialogVisble=e}}},[a("el-table",{attrs:{data:t.dialogTableData,border:!0,size:"small"}},[a("el-table-column",{attrs:{label:"监测项目",prop:"title",align:"center"}}),a("el-table-column",{attrs:{label:"高猛酸盐指数",prop:"cod",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return["input"==e.row.cod?a("el-input",{attrs:{required:"",placeholder:"请输入"},model:{value:t.dialogForm[e.$index].cod,callback:function(a){t.$set(t.dialogForm[e.$index],"cod",a)},expression:"dialogForm[scope.$index].cod"}},[a("template",{slot:"append"},[t._v("mg/L")])],2):t._e(),"btn"==e.row.cod?a("el-button",{attrs:{type:"primary"},on:{click:function(e){return t.submitValue("cod","w01019")}}},[t._v("提交")]):Number(e.row.cod)?a("span",[t._v(t._s(e.row.cod)+"mg/L")]):t._e()]}}],null,!1,4053142201)}),a("el-table-column",{attrs:{label:"氨氮",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return["input"==e.row.an?a("el-input",{attrs:{placeholder:"请输入"},model:{value:t.dialogForm[e.$index].an,callback:function(a){t.$set(t.dialogForm[e.$index],"an",a)},expression:"dialogForm[scope.$index].an"}},[a("template",{slot:"append"},[t._v("mg/L")])],2):t._e(),"btn"==e.row.an?a("el-button",{attrs:{type:"primary"},on:{click:function(e){return t.submitValue("an","w21003")}}},[t._v("提交")]):Number(e.row.an)?a("span",[t._v(t._s(e.row.an)+"mg/L")]):t._e()]}}],null,!1,1281649263)}),a("el-table-column",{attrs:{label:"总磷",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return["input"==e.row.ph?a("el-input",{attrs:{placeholder:"请输入"},model:{value:t.dialogForm[e.$index].ph,callback:function(a){t.$set(t.dialogForm[e.$index],"ph",a)},expression:"dialogForm[scope.$index].ph"}},[a("template",{slot:"append"},[t._v("mg/L")])],2):t._e(),"btn"==e.row.ph?a("el-button",{attrs:{type:"primary"},on:{click:function(e){return t.submitValue("ph","w21011")}}},[t._v("提交")]):Number(e.row.ph)?a("span",[t._v(t._s(e.row.ph)+"mg/L")]):t._e()]}}],null,!1,4191607052)}),a("el-table-column",{attrs:{label:"总氮",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return["input"==e.row.nt?a("el-input",{attrs:{placeholder:"请输入"},model:{value:t.dialogForm[e.$index].nt,callback:function(a){t.$set(t.dialogForm[e.$index],"nt",a)},expression:"dialogForm[scope.$index].nt"}},[a("template",{slot:"append"},[t._v("mg/L")])],2):t._e(),"btn"==e.row.nt?a("el-button",{attrs:{type:"primary"},on:{click:function(e){return t.submitValue("nt","w21001")}}},[t._v("提交")]):Number(e.row.nt)?a("span",[t._v(t._s(e.row.nt)+"mg/L")]):t._e()]}}],null,!1,4135906093)})],1)],1):t._e(),t.historyVisible?a("el-dialog",{directives:[{name:"draggable",rawName:"v-draggable"}],attrs:{title:"操作记录",visible:t.historyVisible,"close-on-click-modal":!1,height:"600px"},on:{"update:visible":function(e){t.historyVisible=e}}},[a("el-table",{attrs:{data:t.historyData,height:"calc(500px - 80px)"}},[a("el-table-column",{attrs:{label:"序号",type:"index"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",[t._v(t._s(t._index(e.$index)))])]}}],null,!1,68959704)}),a("el-table-column",{attrs:{label:"点位名称",prop:"pointName","show-overflow-tooltip":!0}}),a("el-table-column",{attrs:{label:"监测项目",prop:"factorName"}}),a("el-table-column",{attrs:{label:"跨度值",prop:"spanValues"}}),a("el-table-column",{attrs:{label:"零点标准浓液浓度",prop:"zeroStandard"}}),a("el-table-column",{attrs:{label:"跨度标准浓液浓度",prop:"spanStandard"}}),a("el-table-column",{attrs:{label:"提交人",prop:"submitterName"}}),a("el-table-column",{attrs:{label:"提交时间",prop:"submissionTime","show-overflow-tooltip":!0}}),a("el-table-column",{attrs:{label:"审核人",prop:"submitterName"}}),a("el-table-column",{attrs:{label:"审核时间",prop:"submissionTime","show-overflow-tooltip":!0}})],1)],1):t._e()],1)},i=[],s=(a("a15b"),a("d81d"),a("4de4"),a("caad"),a("2532"),a("fb6a"),a("159b"),a("9944")),u=(a("7ebf"),{name:"StandardValueConfig",data:function(){return{loading:!1,form:{selectValue:[],pointOption:""},pointData:[],factorList:[],tableData:[],sourceData:[],auditNottableData:[],dialogTableData:[{title:"上一周水质平均值",cod:null,an:null,ph:null,nt:null},{title:"跨度值",cod:"input",an:"input",ph:"input",nt:"input"},{title:"零点标准浓液浓度",cod:"input",an:"input",ph:"input",nt:"input"},{title:"跨度标准浓液浓度",cod:"input",an:"input",ph:"input",nt:"input"},{title:"",cod:"btn",an:"btn",ph:"btn",nt:"btn"}],dialogVisble:!1,dialogForm:[],historyData:[],historyVisible:!1,tabsActive:0,historyPage:{currentPage:1,pageSize:20,total:80},base:"http://192.168.90.41:8024/api"}},components:{},computed:{selectTooltip:function(){var t=this;return this.factorList.filter((function(e){return t.form.selectValue.includes(e.factorCode)})).map((function(t){return t.factorName})).join(",")}},mounted:function(){var t=this;this.$axios.all([this.getPoints(),this.getFactors()]).then(this.$axios.spread((function(e,a){t.pointData=e.data.data,t.form.pointOption=t.pointData[0].pointId,t.factorList=a.data.data,t.form.selectValue=t.factorList.map((function(t){return t.factorCode})),t.getAuditTableData()}))),this.historyPage.total=this.tableData.length,this._setStantardValue()},methods:{_checkNumber:function(t){var e=/^[-+]?([0-9]+)([.]([0-9]+))?$/;return e.test(t)},submitValue:function(t,e){var a=this,n=this.dialogForm.map((function(t){return t})).slice(1),o={pointId:this.form.pointOption,reviewStatus:0,submitter:Object(s["a"])("userGuid")||"4aea3f54-4e3e-4c4e-b283-a90cc0c16873"};n.every((function(e){return a._checkNumber(e[t])}))?(o.factorCode=e,o.spanValues=n[0][t],o.zeroStandard=n[1][t],o.spanStandard=n[2][t],this.save(o)):this.$notify({title:"提示",message:"请输入正确的数值",type:"error"})},save:function(t){var e=this;this.$axios({method:"post",url:"".concat(this.base,"/spanValuesSetting/save"),headers:{"content-type":"application/json;charset=UTF-8 "},data:JSON.stringify(t)}).then((function(t){e.$notify({title:"提示",message:t.data.msg,type:"success"}),e.getNotAuditTableData(null),e.tabsActive="1"})).catch((function(t){e.$notify({title:"提示",message:t,type:"error"})}))},dialogToggle:function(){this.dialogVisble=!0,this._setStantardValue()},historyClick:function(t){this.historyVisible=!0,this.getHistoryData(t.row.factorCode)},_selectData:function(){},getPoints:function(){var t=Object(s["a"])("UserGuid")||"4aea3f54-4e3e-4c4e-b283-a90cc0c16873";return this.$axios({method:"get",url:"".concat(this.base,"/spanValuesSetting/findPointList"),params:{userId:t}})},getFactors:function(){return this.$axios({method:"get",url:"".concat(this.base,"/spanValuesSetting/findFactorList")})},getAuditTableData:function(){var t=this;this.loading=!0,this.$axios({method:"get",url:"".concat(this.base,"/spanValuesSetting/findSettingByPoint"),params:{pointId:this.form.pointOption}}).then((function(e){t.loading=!1,t.getNotAuditTableData(null),t.tableData=e.data.data.filter((function(e){return t.form.selectValue.includes(e.factorCode)})),t.sourceData=JSON.parse(JSON.stringify(e.data.data)),t.factorList.forEach((function(e,a){t.$set(t.dialogForm,a,{cod:"",an:"",ph:"",nt:""})})),t._setStantardValue(),t.sourceData.map((function(e){switch(e.factorCode){case"w01019":t.dialogTableData[0].cod=e.weekAverage;break;case"w21003":t.dialogTableData[0].an=e.weekAverage;break;case"w21011":t.dialogTableData[0].ph=e.weekAverage;break;case"w21001":t.dialogTableData[0].nt=e.weekAverage;break;default:break}}))})).catch((function(e){t.loading=!1,t.$notify({title:"提示",message:e,type:"error"})}))},getNotAuditTableData:function(t){var e=this;this.$axios({method:"get",url:"".concat(this.base,"/spanValuesSetting/findHistoryByPointAndFactory"),params:{pointId:this.form.pointOption,factorCode:t,reviewStatus:0}}).then((function(t){e.auditNottableData=t.data.data.filter((function(t){return e.form.selectValue.includes(t.factorCode)}))})).catch((function(t){e.$notify({title:"提示",message:t,type:"error"})}))},historySizeChange:function(t){this.historyPage.pageSize=t,this.historyPage.currentPage=1},historyCurrentChange:function(t){this.historyPage.currentPage=t},getHistoryData:function(t){var e=this;this.$axios({method:"get",url:"".concat(this.base,"/spanValuesSetting/findHistoryByPointAndFactory"),params:{pointId:this.form.pointOption,reviewStatus:1,factorCode:t}}).then((function(t){e.historyData=t.data.data}))},tabClick:function(){},_index:function(t){return(this.historyPage.currentPage-1)*this.historyPage.pageSize+(t+1)},_setStantardValue:function(){var t=this;this.dialogForm.map((function(e,a){var n=t.sourceData.filter((function(t){return"w01019"==t.factorCode})),o=t.sourceData.filter((function(t){return"w21003"==t.factorCode})),l=t.sourceData.filter((function(t){return"w21011"==t.factorCode})),r=t.sourceData.filter((function(t){return"w21001"==t.factorCode}));1==a?(t.dialogForm[a].cod=n.length?n[0].spanValues:null,t.dialogForm[a].an=o.length?o[0].spanValues:null,t.dialogForm[a].ph=l.length?l[0].spanValues:null,t.dialogForm[a].nt=r.length?r[0].spanValues:null):2==a?(t.dialogForm[a].cod=n.length?n[0].zeroStandard:null,t.dialogForm[a].an=o.length?o[0].zeroStandard:null,t.dialogForm[a].ph=l.length?l[0].zeroStandard:null,t.dialogForm[a].nt=r.length?r[0].zeroStandard:null):3==a&&(t.dialogForm[a].cod=n.length?n[0].spanStandard:null,t.dialogForm[a].an=o.length?o[0].spanStandard:null,t.dialogForm[a].ph=l.length?l[0].spanStandard:null,t.dialogForm[a].nt=r.length?r[0].spanStandard:null)}))}}}),c=u,p=(a("753f"),a("2877")),d=Object(p["a"])(c,r,i,!1,null,"6ef465c1",null),f=d.exports,b=(a("0fae"),a("3cc5"),a("bc3a")),m=a.n(b),g=a("9f4a"),h=a.n(g);n["default"].config.productionTip=!1,n["default"].prototype.$axios=m.a,n["default"].use(h.a,{containment:!0}),n["default"].use(l.a,{size:"mini"}),new n["default"]({render:function(t){return t(f)}}).$mount("#app")}});